<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Doug Dunn">

<title>Lab 05: Machine Learning in Hydrology</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="lab-05_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab-05_files/libs/quarto-html/quarto.js"></script>
<script src="lab-05_files/libs/quarto-html/popper.min.js"></script>
<script src="lab-05_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab-05_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab-05_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab-05_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab-05_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab-05_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab-05_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 05: Machine Learning in Hydrology</h1>
<p class="subtitle lead">Ecosystem Science and Sustainability 523c</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Doug Dunn <a href="mailto:dunnd@colostate.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidymodels' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.3.0 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ broom        1.0.8     ✔ recipes      1.1.1
✔ dials        1.4.0     ✔ rsample      1.3.0
✔ dplyr        1.1.4     ✔ tibble       3.2.1
✔ ggplot2      3.5.2     ✔ tidyr        1.3.1
✔ infer        1.0.8     ✔ tune         1.3.0
✔ modeldata    1.4.0     ✔ workflows    1.2.0
✔ parsnip      1.3.1     ✔ workflowsets 1.1.0
✔ purrr        1.0.4     ✔ yardstick    1.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'broom' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dials' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'infer' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'modeldata' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'parsnip' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'rsample' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tune' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'workflows' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'workflowsets' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'yardstick' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ purrr::discard() masks scales::discard()
✖ dplyr::filter()  masks stats::filter()
✖ dplyr::lag()     masks stats::lag()
✖ recipes::step()  masks stats::step()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ forcats   1.0.0     ✔ readr     2.1.5
✔ lubridate 1.9.4     ✔ stringr   1.5.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ readr::col_factor() masks scales::col_factor()
✖ purrr::discard()    masks scales::discard()
✖ dplyr::filter()     masks stats::filter()
✖ stringr::fixed()    masks recipes::fixed()
✖ dplyr::lag()        masks stats::lag()
✖ readr::spec()       masks yardstick::spec()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(powerjoin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'powerjoin' was built under R version 4.4.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'vip' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'vip'

The following object is masked from 'package:utils':

    vi</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(baguette)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'baguette' was built under R version 4.4.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'gridExtra'

The following object is masked from 'package:dplyr':

    combine</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'patchwork' was built under R version 4.4.3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the `findNLDI` function to get the basin and flowlines for the first gauge</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>basin <span class="ot">&lt;-</span> dataRetrieval<span class="sc">::</span><span class="fu">findNLDI</span>(<span class="at">nwis =</span> <span class="st">"01013500"</span>, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="co"># Navigate the "upper tributaries" of the basin</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">nav =</span> <span class="st">"UT"</span>, </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="co"># Return the basin and flowlines</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">find =</span> <span class="fu">c</span>(<span class="st">"basin"</span>, <span class="st">"flowlines"</span>))</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the basin, flowlines, and gauge ...</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> basin<span class="sc">$</span>basin, <span class="at">fill =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span> </span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> basin<span class="sc">$</span>UT_flowlines, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> basin<span class="sc">$</span>origin, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span> </span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># root url of where camels files are located</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>root  <span class="ot">&lt;-</span> <span class="st">'https://gdex.ucar.edu/dataset/camels/file'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download pdf of camels attributes</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">'https://gdex.ucar.edu/dataset/camels/file/camels_attributes_v2.0.pdf'</span>, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">'data/camels_attributes_v2.0.pdf'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># types of files we are interested in</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>types <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"clim"</span>, <span class="st">"geol"</span>, <span class="st">"soil"</span>, <span class="st">"topo"</span>, <span class="st">"vege"</span>, <span class="st">"hydro"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Where the files live online ...</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>remote_files  <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'{root}/camels_{types}.txt'</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># where we want to download the data ...</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>local_files   <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">'data/camels_{types}.txt'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download files from the set parameters to our local directory</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(remote_files, local_files, download.file, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and merge data</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>camels <span class="ot">&lt;-</span> <span class="fu">map</span>(local_files, read_delim, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># full join of every data.frame in the camels merged data</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>camels <span class="ot">&lt;-</span> <span class="fu">power_full_join</span>(camels ,<span class="at">by =</span> <span class="st">'gauge_id'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternatively read and merge camels data directly from URL</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this may fail if the url goes down</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>camels <span class="ot">&lt;-</span> <span class="fu">map</span>(remote_files, read_delim, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">power_full_join</span>(<span class="at">by =</span> <span class="st">'gauge_id'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="question-1" class="level1">
<h1>Question 1</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> camels, <span class="fu">aes</span>(<span class="at">x =</span> gauge_lon, <span class="at">y =</span> gauge_lat)) <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">borders</span>(<span class="st">"state"</span>, <span class="at">colour =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> q_mean)) <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"pink"</span>, <span class="at">high =</span> <span class="st">"dodgerblue"</span>) <span class="sc">+</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_map</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The variable zero_q_freq is the frequency of days with Q = 0 mm/day. This is represented as a percent, and is how often their is no flow.</p>
</section>
<section id="question-2" class="level1">
<h1>Question 2</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1: Colored by p_mean</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> camels, <span class="fu">aes</span>(<span class="at">x =</span> gauge_lon, <span class="at">y =</span> gauge_lat)) <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">borders</span>(<span class="st">"state"</span>, <span class="at">colour =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> p_mean)) <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"lightblue"</span>, <span class="at">high =</span> <span class="st">"darkblue"</span>, <span class="at">name =</span> <span class="st">"Precipitation Mean"</span>) <span class="sc">+</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_map</span>() <span class="sc">+</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>, <span class="at">y =</span> <span class="st">"Latitude"</span>, <span class="at">title =</span> <span class="st">"Mean Precipitation"</span>) <span class="sc">+</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2: Colored by aridity</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>plot2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> camels, <span class="fu">aes</span>(<span class="at">x =</span> gauge_lon, <span class="at">y =</span> gauge_lat)) <span class="sc">+</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">borders</span>(<span class="st">"state"</span>, <span class="at">colour =</span> <span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> aridity)) <span class="sc">+</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"darkgreen"</span>, <span class="at">high =</span> <span class="st">"yellow"</span>, <span class="at">name =</span> <span class="st">"Aridity"</span>) <span class="sc">+</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_map</span>() <span class="sc">+</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitude"</span>, <span class="at">y =</span> <span class="st">"Latitude"</span>, <span class="at">title =</span> <span class="st">"Aridity"</span>) <span class="sc">+</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine plots with patchwork and add a shared title</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>combined_plot <span class="ot">&lt;-</span> (plot1 <span class="sc">+</span> plot2) <span class="sc">+</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Geographic Distribution of select CAMELS Data"</span>,</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined plot</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>combined_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="model-preparation" class="level2">
<h2 class="anchored" data-anchor-id="model-preparation">Model Preparation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>camels <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(aridity, p_mean, q_mean) <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           aridity     p_mean     q_mean
aridity  1.0000000 -0.7550090 -0.5817771
p_mean  -0.7550090  1.0000000  0.8865757
q_mean  -0.5817771  0.8865757  1.0000000</code></pre>
</div>
</div>
</section>
<section id="visual-eda" class="level2">
<h2 class="anchored" data-anchor-id="visual-eda">Visual EDA</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a scatter plot of aridity vs rainfall</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(camels, <span class="fu">aes</span>(<span class="at">x =</span> aridity, <span class="at">y =</span> p_mean)) <span class="sc">+</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add points colored by mean flow</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> q_mean)) <span class="sc">+</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a linear regression line</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply the viridis color scale</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add a title, axis labels, and theme (w/ legend on the bottom)</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>() <span class="sc">+</span> </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> </span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Aridity vs Rainfall vs Runnoff"</span>, </span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Aridity"</span>, </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Rainfall"</span>,</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Mean Flow"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(camels, <span class="fu">aes</span>(<span class="at">x =</span> aridity, <span class="at">y =</span> p_mean)) <span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> q_mean)) <span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply log transformations to the x and y axes</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span> </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>() <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> </span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Aridity vs Rainfall vs Runnoff"</span>, </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Aridity"</span>, </span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Rainfall"</span>,</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Mean Flow"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(camels, <span class="fu">aes</span>(<span class="at">x =</span> aridity, <span class="at">y =</span> p_mean)) <span class="sc">+</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> q_mean)) <span class="sc">+</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply a log transformation to the color scale</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>(<span class="at">trans =</span> <span class="st">"log"</span>) <span class="sc">+</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span> </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>() <span class="sc">+</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Expand the legend width ...</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">2.5</span>, <span class="st">"cm"</span>),</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.height =</span> <span class="fu">unit</span>(.<span class="dv">5</span>, <span class="st">"cm"</span>)) <span class="sc">+</span> </span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Aridity vs Rainfall vs Runnoff"</span>, </span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Aridity"</span>, </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Rainfall"</span>,</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Mean Flow"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-building" class="level2">
<h2 class="anchored" data-anchor-id="model-building">Model Building</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Bad form to perform simple transformations on the outcome variable within a </span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># recipe. So, we'll do it here.</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>camels <span class="ot">&lt;-</span> camels <span class="sc">|&gt;</span> </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">logQmean =</span> <span class="fu">log</span>(q_mean))</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate the split</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>camels_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(camels, <span class="at">prop =</span> <span class="fl">0.8</span>)</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>camels_train <span class="ot">&lt;-</span> <span class="fu">training</span>(camels_split)</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>camels_test  <span class="ot">&lt;-</span> <span class="fu">testing</span>(camels_split)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>camels_cv <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(camels_train, <span class="at">v =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a recipe to preprocess the data</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>rec <span class="ot">&lt;-</span>  <span class="fu">recipe</span>(logQmean <span class="sc">~</span> aridity <span class="sc">+</span> p_mean, <span class="at">data =</span> camels_train) <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Log transform the predictor variables (aridity and p_mean)</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_log</span>(<span class="fu">all_predictors</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add an interaction term between aridity and p_mean</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(<span class="at">terms =</span> <span class="sc">~</span> aridity<span class="sc">:</span>p_mean) <span class="sc">|&gt;</span> </span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drop any rows with missing values in the pred</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_naomit</span>(<span class="fu">all_predictors</span>(), <span class="fu">all_outcomes</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the data</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>baked_data <span class="ot">&lt;-</span> <span class="fu">prep</span>(rec, camels_train) <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bake</span>(<span class="at">new_data =</span> <span class="cn">NULL</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Interaction with lm</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  Base lm sets interaction terms with the * symbol</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>lm_base <span class="ot">&lt;-</span> <span class="fu">lm</span>(logQmean <span class="sc">~</span> aridity <span class="sc">*</span> p_mean, <span class="at">data =</span> baked_data)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_base)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = logQmean ~ aridity * p_mean, data = baked_data)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.91162 -0.21601 -0.00716  0.21230  2.85706 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)    -1.77586    0.16365 -10.852  &lt; 2e-16 ***
aridity        -0.88397    0.16145  -5.475 6.75e-08 ***
p_mean          1.48438    0.15511   9.570  &lt; 2e-16 ***
aridity:p_mean  0.10484    0.07198   1.457    0.146    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5696 on 531 degrees of freedom
Multiple R-squared:  0.7697,    Adjusted R-squared:  0.7684 
F-statistic: 591.6 on 3 and 531 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sanity Interaction term from recipe ... these should be equal!!</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">lm</span>(logQmean <span class="sc">~</span> aridity <span class="sc">+</span> p_mean <span class="sc">+</span> aridity_x_p_mean, <span class="at">data =</span> baked_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = logQmean ~ aridity + p_mean + aridity_x_p_mean, 
    data = baked_data)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.91162 -0.21601 -0.00716  0.21230  2.85706 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)      -1.77586    0.16365 -10.852  &lt; 2e-16 ***
aridity          -0.88397    0.16145  -5.475 6.75e-08 ***
p_mean            1.48438    0.15511   9.570  &lt; 2e-16 ***
aridity_x_p_mean  0.10484    0.07198   1.457    0.146    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5696 on 531 degrees of freedom
Multiple R-squared:  0.7697,    Adjusted R-squared:  0.7684 
F-statistic: 591.6 on 3 and 531 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="wrong-version-1-augment" class="level2">
<h2 class="anchored" data-anchor-id="wrong-version-1-augment">Wrong version 1: augment</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(camels_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 135</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(camels_train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 536</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">#broom::augment(lm_base, data = camels_test)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="wrong-version-2-predict" class="level2">
<h2 class="anchored" data-anchor-id="wrong-version-2-predict">Wrong version 2: predict</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>camels_test<span class="sc">$</span>p2 <span class="ot">=</span> <span class="fu">predict</span>(lm_base, <span class="at">newdata =</span> camels_test)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Scales way off!</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(camels_test, <span class="fu">aes</span>(<span class="at">x =</span> p2, <span class="at">y =</span> logQmean)) <span class="sc">+</span> </span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Linear fit line, no error bands</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1:1 line</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Linear Model Using `predict()`"</span>,</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Predicted Log Mean Flow"</span>,</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Observed Log Mean Flow"</span>) <span class="sc">+</span> </span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="correct-version-prep---bake---predict" class="level2">
<h2 class="anchored" data-anchor-id="correct-version-prep---bake---predict">Correct version: prep -&gt; bake -&gt; predict</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span>  <span class="fu">bake</span>(<span class="fu">prep</span>(rec), <span class="at">new_data =</span> camels_test)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>test_data<span class="sc">$</span>lm_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_base, <span class="at">newdata =</span> test_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="model-evaluation-statistical-and-visual" class="level2">
<h2 class="anchored" data-anchor-id="model-evaluation-statistical-and-visual">Model Evaluation: statistical and visual</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metrics</span>(test_data, <span class="at">truth =</span> logQmean, <span class="at">estimate =</span> lm_pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard       0.583
2 rsq     standard       0.742
3 mae     standard       0.390</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(test_data, <span class="fu">aes</span>(<span class="at">x =</span> logQmean, <span class="at">y =</span> lm_pred, <span class="at">colour =</span> aridity)) <span class="sc">+</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Apply a gradient color scale</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient2</span>(<span class="at">low =</span> <span class="st">"brown"</span>, <span class="at">mid =</span> <span class="st">"orange"</span>, <span class="at">high =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>() <span class="sc">+</span> </span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Linear Model: Observed vs Predicted"</span>,</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Observed Log Mean Flow"</span>,</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Predicted Log Mean Flow"</span>,</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Aridity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="using-a-workflow" class="level2">
<h2 class="anchored" data-anchor-id="using-a-workflow">Using a Workflow</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define model</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>lm_model <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define the engine</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define the mode</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate a workflow ...</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>lm_wf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the recipe</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(rec) <span class="sc">%&gt;%</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the model</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lm_model) <span class="sc">%&gt;%</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit the model to the training data</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> camels_train) </span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the model coefficients from the workflow</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">extract_fit_engine</span>(lm_wf))<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   Estimate Std. Error    t value     Pr(&gt;|t|)
(Intercept)      -1.7758557 0.16364755 -10.851710 6.463654e-25
aridity          -0.8839738 0.16144589  -5.475357 6.745512e-08
p_mean            1.4843771 0.15511117   9.569762 4.022500e-20
aridity_x_p_mean  0.1048449 0.07198145   1.456555 1.458304e-01</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># From the base implementation</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_base)<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 Estimate Std. Error    t value     Pr(&gt;|t|)
(Intercept)    -1.7758557 0.16364755 -10.851710 6.463654e-25
aridity        -0.8839738 0.16144589  -5.475357 6.745512e-08
p_mean          1.4843771 0.15511117   9.569762 4.022500e-20
aridity:p_mean  0.1048449 0.07198145   1.456555 1.458304e-01</code></pre>
</div>
</div>
<p>These results look exactly the same.</p>
</section>
<section id="making-predictions" class="level2">
<h2 class="anchored" data-anchor-id="making-predictions">Making Predictions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>lm_data <span class="ot">&lt;-</span> <span class="fu">augment</span>(lm_wf, <span class="at">new_data =</span> camels_test)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(lm_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 135  62</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metrics</span>(lm_data, <span class="at">truth =</span> logQmean, <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard       0.583
2 rsq     standard       0.742
3 mae     standard       0.390</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lm_data, <span class="fu">aes</span>(<span class="at">x =</span> logQmean, <span class="at">y =</span> .pred, <span class="at">colour =</span> aridity)) <span class="sc">+</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>() <span class="sc">+</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="switch-it-up" class="level2">
<h2 class="anchored" data-anchor-id="switch-it-up">Switch it up!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(baguette)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">importance =</span> <span class="st">"impurity"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>rf_wf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the recipe</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(rec) <span class="sc">%&gt;%</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the model</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(rf_model) <span class="sc">%&gt;%</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fit the model</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> camels_train) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="predictions" class="level2">
<h2 class="anchored" data-anchor-id="predictions">Predictions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>rf_data <span class="ot">&lt;-</span> <span class="fu">augment</span>(rf_wf, <span class="at">new_data =</span> camels_test)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rf_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 135  61</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rf_data, <span class="fu">aes</span>(<span class="at">x =</span> logQmean, <span class="at">y =</span> .pred, <span class="at">colour =</span> aridity)) <span class="sc">+</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>() <span class="sc">+</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="a-workflow-approach" class="level2">
<h2 class="anchored" data-anchor-id="a-workflow-approach">A workflow approach</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>wf <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(<span class="fu">list</span>(rec), <span class="fu">list</span>(lm_model, rf_model)) <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow_map</span>(<span class="st">'fit_resamples'</span>, <span class="at">resamples =</span> camels_cv) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ranger' was built under R version 4.4.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(wf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank_results</span>(wf, <span class="at">rank_metric =</span> <span class="st">"rsq"</span>, <span class="at">select_best =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 9
  wflow_id          .config .metric  mean std_err     n preprocessor model  rank
  &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;
1 recipe_rand_fore… Prepro… rmse    0.565  0.0243    10 recipe       rand…     1
2 recipe_rand_fore… Prepro… rsq     0.770  0.0255    10 recipe       rand…     1
3 recipe_linear_reg Prepro… rmse    0.569  0.0260    10 recipe       line…     2
4 recipe_linear_reg Prepro… rsq     0.770  0.0223    10 recipe       line…     2</code></pre>
</div>
</div>
</section>
<section id="final-model" class="level2">
<h2 class="anchored" data-anchor-id="final-model">Final Model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>rf_fin <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">importance =</span> <span class="st">"impurity"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>final <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span> </span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(rec) <span class="sc">|&gt;</span> </span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(rf_fin) <span class="sc">|&gt;</span> </span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> camels_train) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="evaluation" class="level2">
<h2 class="anchored" data-anchor-id="evaluation">Evaluation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># VIP: </span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>vip<span class="sc">::</span><span class="fu">vip</span>(final)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Predcition</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>rf_data <span class="ot">&lt;-</span> <span class="fu">augment</span>(final, <span class="at">new_data =</span> camels_test)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Evaluation</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">metrics</span>(rf_data, <span class="at">truth =</span> logQmean, <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard       0.591
2 rsq     standard       0.738
3 mae     standard       0.366</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rf_data, <span class="fu">aes</span>(<span class="at">x =</span> logQmean, <span class="at">y =</span> .pred, <span class="at">colour =</span> aridity)) <span class="sc">+</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>() <span class="sc">+</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">col =</span> <span class="st">'red'</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>() <span class="sc">+</span> </span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Random Forest Model: Observed vs Predicted"</span>,</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Observed Log Mean Flow"</span>,</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Predicted Log Mean Flow"</span>,</span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Aridity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="question-3" class="level2">
<h2 class="anchored" data-anchor-id="question-3">Question 3</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define model</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>xg_model <span class="ot">&lt;-</span> <span class="fu">boost_tree</span>() <span class="sc">%&gt;%</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define the engine</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define the mode</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>nn_model <span class="ot">&lt;-</span> <span class="fu">bag_mlp</span>() <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define the engine</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># define the mode</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>model_set <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">preproc =</span> <span class="fu">list</span>(<span class="at">camels_recipe =</span> rec),</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">models =</span> <span class="fu">list</span>(</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">rf =</span> rf_fin,</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">xgboost =</span> xg_model,</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">neural_net =</span> nn_model</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>resamples <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(camels_train, <span class="at">v =</span> <span class="dv">5</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> model_set <span class="sc">|&gt;</span> </span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow_map</span>(</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> resamples,</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, rsq),</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>i   No tuning parameters. `fit_resamples()` will be attempted</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 1 of 3 resampling: camels_recipe_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 1 of 3 resampling: camels_recipe_rf (680ms)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i   No tuning parameters. `fit_resamples()` will be attempted</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 2 of 3 resampling: camels_recipe_xgboost</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'xgboost' was built under R version 4.4.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 2 of 3 resampling: camels_recipe_xgboost (250ms)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i   No tuning parameters. `fit_resamples()` will be attempted</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 3 of 3 resampling: camels_recipe_neural_net</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 3 of 3 resampling: camels_recipe_neural_net (3.1s)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
  wflow_id          .config preproc model .metric .estimator  mean     n std_err
  &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
1 camels_recipe_rf  Prepro… recipe  rand… rmse    standard   0.569     5  0.0209
2 camels_recipe_rf  Prepro… recipe  rand… rsq     standard   0.772     5  0.0144
3 camels_recipe_xg… Prepro… recipe  boos… rmse    standard   0.579     5  0.0124
4 camels_recipe_xg… Prepro… recipe  boos… rsq     standard   0.766     5  0.0148
5 camels_recipe_ne… Prepro… recipe  bag_… rmse    standard   0.553     5  0.0117
6 camels_recipe_ne… Prepro… recipe  bag_… rsq     standard   0.787     5  0.0126</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(results)  <span class="co"># nice visual comparison</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I would choose the bag_mlp model since it has a smaller spread of rmse and the lowest rmse center. It also has a slightly higher rsq, but it not far from the other two model results.</p>
</section>
<section id="question-4" class="level2">
<h2 class="anchored" data-anchor-id="question-4">Question 4</h2>
<section id="data-spliting" class="level3">
<h3 class="anchored" data-anchor-id="data-spliting">Data Spliting</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data splitting</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Split data into 75% train, 25% test</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>camels_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(camels, <span class="at">prop =</span> <span class="fl">0.75</span>, <span class="at">strata =</span> logQmean)</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>camels_train <span class="ot">&lt;-</span> <span class="fu">training</span>(camels_split)</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>camels_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(camels_split)</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 10-fold cross-validation</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>camels_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(camels_train, <span class="at">v =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recipe" class="level3">
<h3 class="anchored" data-anchor-id="recipe">Recipe</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co">#recipe</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>rec <span class="ot">&lt;-</span> <span class="fu">recipe</span>(logQmean <span class="sc">~</span> p_mean <span class="sc">+</span> pet_mean <span class="sc">+</span> frac_snow <span class="sc">+</span> lai_max <span class="sc">+</span> soil_porosity <span class="sc">+</span> slope_mean, </span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> camels_train) <span class="sc">|&gt;</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_impute_median</span>(<span class="fu">all_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_naomit</span>(<span class="fu">all_outcomes</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="models" class="level3">
<h3 class="anchored" data-anchor-id="models">3 Models</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define models</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(<span class="at">mtry =</span> <span class="dv">6</span>, <span class="at">trees =</span> <span class="dv">500</span>, <span class="at">min_n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">importance =</span> <span class="st">"permutation"</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>xg_model <span class="ot">&lt;-</span> <span class="fu">boost_tree</span>(<span class="at">trees =</span> <span class="dv">1000</span>, <span class="at">learn_rate =</span> <span class="fl">0.01</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"xgboost"</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>nn_model <span class="ot">&lt;-</span> <span class="fu">mlp</span>(<span class="at">hidden_units =</span> <span class="dv">6</span>, <span class="at">penalty =</span> <span class="fl">0.01</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="workflowset" class="level3">
<h3 class="anchored" data-anchor-id="workflowset">Workflowset</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># workflow setup</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>model_set <span class="ot">&lt;-</span> <span class="fu">workflow_set</span>(</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">preproc =</span> <span class="fu">list</span>(<span class="at">camels_recipe =</span> rec),</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">models =</span> <span class="fu">list</span>(</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">rf =</span> rf_model,</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">xgboost =</span> xg_model,</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">neural_net =</span> nn_model</span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> model_set <span class="sc">|&gt;</span> </span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">workflow_map</span>(</span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> camels_folds,</span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, rsq),</span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>i   No tuning parameters. `fit_resamples()` will be attempted</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 1 of 3 resampling: camels_recipe_rf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 1 of 3 resampling: camels_recipe_rf (2.4s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i   No tuning parameters. `fit_resamples()` will be attempted</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 2 of 3 resampling: camels_recipe_xgboost</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 2 of 3 resampling: camels_recipe_xgboost (5.7s)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i   No tuning parameters. `fit_resamples()` will be attempted</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i 3 of 3 resampling: camels_recipe_neural_net</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ 3 of 3 resampling: camels_recipe_neural_net (811ms)</code></pre>
</div>
</div>
</section>
<section id="evaluation-1" class="level3">
<h3 class="anchored" data-anchor-id="evaluation-1">Evaluation</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># evaluation of model results</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank_results</span>(results, <span class="at">rank_metric =</span> <span class="st">"rsq"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.metric <span class="sc">==</span> <span class="st">"rsq"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  wflow_id          .config .metric  mean std_err     n preprocessor model  rank
  &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;
1 camels_recipe_ne… Prepro… rsq     0.903  0.0114    10 recipe       mlp       1
2 camels_recipe_rf  Prepro… rsq     0.894  0.0116    10 recipe       rand…     2
3 camels_recipe_xg… Prepro… rsq     0.872  0.0153    10 recipe       boos…     3</code></pre>
</div>
</div>
</section>
<section id="test-nn-model-on-test-data" class="level3">
<h3 class="anchored" data-anchor-id="test-nn-model-on-test-data">Test NN Model on Test Data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the neural network workflow from the model_set</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>final_workflow <span class="ot">&lt;-</span> <span class="fu">extract_workflow</span>(model_set, <span class="st">"camels_recipe_neural_net"</span>)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the workflow to the entire training data</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>final_fit <span class="ot">&lt;-</span> final_workflow <span class="sc">%&gt;%</span> </span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> camels_train)</span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate predictions on the test set using augment()</span></span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>results_test <span class="ot">&lt;-</span> <span class="fu">augment</span>(final_fit, <span class="at">new_data =</span> camels_test)</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate performance on the test set</span></span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>test_metrics <span class="ot">&lt;-</span> results_test <span class="sc">%&gt;%</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">metrics</span>(<span class="at">truth =</span> logQmean, <span class="at">estimate =</span> .pred) <span class="sc">%&gt;%</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.metric <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"rmse"</span>, <span class="st">"rsq"</span>))</span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(test_metrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard       0.343
2 rsq     standard       0.910</code></pre>
</div>
</div>
</section>
<section id="plot-of-predicted-vs.-observed-for-nn-model" class="level3">
<h3 class="anchored" data-anchor-id="plot-of-predicted-vs.-observed-for-nn-model">Plot of Predicted vs.&nbsp;Observed for NN Model</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(results_test, <span class="fu">aes</span>(<span class="at">x =</span> logQmean, <span class="at">y =</span> .pred)) <span class="sc">+</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>() <span class="sc">+</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">col =</span> <span class="st">'red'</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_linedraw</span>() <span class="sc">+</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Observed logQmean"</span>, <span class="at">y =</span> <span class="st">"Predicted logQmean"</span>, </span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Neural Net Model: Observed vs. Predicted"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The neural net model is the best because it has the highest (and only) R2 value over 0.9. The RMSE is also relative low, indicating that the sensitivity to outliers is less than the other models.</p>
</section>
<section id="model-tuning" class="level3">
<h3 class="anchored" data-anchor-id="model-tuning">Model Tuning</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># neural network model with tunable hyperparameters</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>nn_model_tune <span class="ot">&lt;-</span> <span class="fu">mlp</span>(</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">hidden_units =</span> <span class="fu">tune</span>(),  <span class="co"># Tune number of hidden units</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">penalty =</span> <span class="fu">tune</span>(),       <span class="co"># Tune regularization penalty</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs =</span> <span class="dv">100</span>            <span class="co"># Fixed number of epochs (adjust if needed)</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"nnet"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a><span class="co"># workflow for the neural network</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>nn_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(rec) <span class="sc">%&gt;%</span></span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(nn_model_tune)</span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a grid of hyperparameters to tune</span></span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a>nn_grid <span class="ot">&lt;-</span> <span class="fu">grid_regular</span>(</span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hidden_units</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">10</span>)),  <span class="co"># Try 4 to 10 hidden units</span></span>
<span id="cb131-18"><a href="#cb131-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">penalty</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">0</span>)),       <span class="co"># Try 10^-3 to 10^0 (0.001 to 1)</span></span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>)                 <span class="co"># 4 levels for each parameter (16 combinations)</span></span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Tune the model using tune_grid</span></span>
<span id="cb131-23"><a href="#cb131-23" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb131-24"><a href="#cb131-24" aria-hidden="true" tabindex="-1"></a>nn_tune_results <span class="ot">&lt;-</span> nn_workflow <span class="sc">%&gt;%</span></span>
<span id="cb131-25"><a href="#cb131-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(</span>
<span id="cb131-26"><a href="#cb131-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamples =</span> camels_folds,</span>
<span id="cb131-27"><a href="#cb131-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">grid =</span> nn_grid,</span>
<span id="cb131-28"><a href="#cb131-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, rsq),</span>
<span id="cb131-29"><a href="#cb131-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">control_grid</span>(<span class="at">verbose =</span> <span class="cn">TRUE</span>)</span>
<span id="cb131-30"><a href="#cb131-30" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold01: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold01: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold02: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold02: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold03: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold03: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold04: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold04: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold05: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold05: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold06: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold06: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold07: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold07: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold08: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold08: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold09: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold09: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 1/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 1/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 1/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 2/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 2/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 2/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 3/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 3/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 3/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 4/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 4/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 4/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 5/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 5/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 5/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 6/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 6/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 6/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 7/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 7/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 7/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 8/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 8/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 8/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 9/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 9/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 9/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 10/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 10/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 10/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 11/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 11/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 11/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 12/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 12/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 12/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 13/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 13/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 13/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 14/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 14/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 14/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 15/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 15/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 15/16 (predictions)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ Fold10: preprocessor 1/1, model 16/16</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 16/16 (extracts)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>i Fold10: preprocessor 1/1, model 16/16 (predictions)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb792"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb792-1"><a href="#cb792-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the best hyperparameter combinations for rsq</span></span>
<span id="cb792-2"><a href="#cb792-2" aria-hidden="true" tabindex="-1"></a>best_nn_params <span class="ot">&lt;-</span> <span class="fu">show_best</span>(nn_tune_results, <span class="at">metric =</span> <span class="st">"rsq"</span>, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb792-3"><a href="#cb792-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(best_nn_params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  hidden_units penalty .metric .estimator  mean     n std_err .config           
         &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;             
1           10   0.1   rsq     standard   0.916    10 0.00880 Preprocessor1_Mod…
2            6   0.1   rsq     standard   0.912    10 0.0103  Preprocessor1_Mod…
3            4   0.1   rsq     standard   0.912    10 0.00896 Preprocessor1_Mod…
4            4   0.001 rsq     standard   0.912    10 0.00851 Preprocessor1_Mod…
5            4   0.01  rsq     standard   0.911    10 0.00875 Preprocessor1_Mod…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb794"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb794-1"><a href="#cb794-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the best hyperparameters</span></span>
<span id="cb794-2"><a href="#cb794-2" aria-hidden="true" tabindex="-1"></a>final_nn_params <span class="ot">&lt;-</span> <span class="fu">select_best</span>(nn_tune_results, <span class="at">metric =</span> <span class="st">"rsq"</span>)</span>
<span id="cb794-3"><a href="#cb794-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-4"><a href="#cb794-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Finalize the workflow with the best hyperparameters</span></span>
<span id="cb794-5"><a href="#cb794-5" aria-hidden="true" tabindex="-1"></a>final_nn_model <span class="ot">&lt;-</span> <span class="fu">finalize_model</span>(nn_model_tune, final_nn_params)</span>
<span id="cb794-6"><a href="#cb794-6" aria-hidden="true" tabindex="-1"></a>final_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb794-7"><a href="#cb794-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(rec) <span class="sc">%&gt;%</span></span>
<span id="cb794-8"><a href="#cb794-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(final_nn_model)</span>
<span id="cb794-9"><a href="#cb794-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-10"><a href="#cb794-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the final tuned model on the full training data</span></span>
<span id="cb794-11"><a href="#cb794-11" aria-hidden="true" tabindex="-1"></a>final_fit <span class="ot">&lt;-</span> final_workflow <span class="sc">%&gt;%</span></span>
<span id="cb794-12"><a href="#cb794-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> camels_train)</span>
<span id="cb794-13"><a href="#cb794-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-14"><a href="#cb794-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the final model on the test set</span></span>
<span id="cb794-15"><a href="#cb794-15" aria-hidden="true" tabindex="-1"></a>results_test <span class="ot">&lt;-</span> <span class="fu">augment</span>(final_fit, <span class="at">new_data =</span> camels_test)</span>
<span id="cb794-16"><a href="#cb794-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-17"><a href="#cb794-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate test set metrics</span></span>
<span id="cb794-18"><a href="#cb794-18" aria-hidden="true" tabindex="-1"></a>test_metrics <span class="ot">&lt;-</span> results_test <span class="sc">%&gt;%</span></span>
<span id="cb794-19"><a href="#cb794-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">metrics</span>(<span class="at">truth =</span> logQmean, <span class="at">estimate =</span> .pred) <span class="sc">%&gt;%</span></span>
<span id="cb794-20"><a href="#cb794-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.metric <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"rmse"</span>, <span class="st">"rsq"</span>))</span>
<span id="cb794-21"><a href="#cb794-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb794-22"><a href="#cb794-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Print test set metrics</span></span>
<span id="cb794-23"><a href="#cb794-23" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(test_metrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard       0.282
2 rsq     standard       0.939</code></pre>
</div>
<div class="sourceCode cell-code" id="cb796"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb796-1"><a href="#cb796-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot observed vs. predicted</span></span>
<span id="cb796-2"><a href="#cb796-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb796-3"><a href="#cb796-3" aria-hidden="true" tabindex="-1"></a>results_test <span class="sc">%&gt;%</span></span>
<span id="cb796-4"><a href="#cb796-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> logQmean, <span class="at">y =</span> .pred)) <span class="sc">+</span></span>
<span id="cb796-5"><a href="#cb796-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb796-6"><a href="#cb796-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb796-7"><a href="#cb796-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Observed logQmean"</span>, <span class="at">y =</span> <span class="st">"Predicted logQmean"</span>, </span>
<span id="cb796-8"><a href="#cb796-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Tuned Neural Network: Test Set Predictions"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="lab-05_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="check-vip" class="level3">
<h3 class="anchored" data-anchor-id="check-vip">Check VIP</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb797"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb797-1"><a href="#cb797-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vip</span>(results_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: Model-specific variable importance scores are currently not available for this type of model.</code></pre>
</div>
</div>
<p>VIP is unable to work on the neural net model because it is more of a black box and we do not know exactly what is going on. It does give us good results but we have less of an understanding of the roles each variable is playing in model and how they are being used. It helps use understand that the variables used can predict streamflow, but we are not sure exactly how and so other study would be needed to further determine what exactly those relationships are. Overall the model fits the data well, and does a good job of fitting predictions to observations. There is more spread at very low streamflows, indicating that the model may be less effective at lower flows.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>